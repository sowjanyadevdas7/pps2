(window.webpackJsonp=window.webpackJsonp||[]).push([[188],{1486:function(e,t,o){e.exports={adfree_loyal:"_2qxEO",overlay_bg:"_3cBJH",meteredPaywall:"ufpuJ",common_blocker_box:"_1lHY9",common_blocker:"_32YdL",btn_wrapper:"_39UsM",button1:"_2hhVN",button_plain:"_2M7iM",blocker_content:"_1jv8A",first_head:"_1fkf_",tag_line:"_3NU6X",subs_text:"_16Q8w",close_btn:"_1i4uT",white_theme:"CWGeJ"}},625:function(e,t,o){"use strict";o.r(t);var n=o(12),r=o.n(n),a=o(130),i=(o(10),o(32)),s=o(13),c=o(28);function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){p(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var d=function(e){return"toi/".concat("loyalusers","/").concat(e)},f=d("LOYAL_USERS_HIDE_ADS"),m=d("LOYAL_USERS_POPUP");c.a.register("loyalusers",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f:return l(l({},e),{},{hideAds:t.paylaod});case m:return l(l({},e),{},{popupVisible:t.paylaod});default:return e}}));var g,b=o(1486),h=o.n(b);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,o,n){g||(g="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=n;else if(a>1){for(var i=new Array(a),s=0;s<a;s++)i[s]=arguments[s+3];t.children=i}if(t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});return{$$typeof:g,type:e,key:void 0===o?null:""+o,ref:null,props:t,_owner:null}}function _(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=k(e);if(t){var r=k(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return O(this,o)}}function O(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(c,e);var t,o,n,a=S(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).registerWithPopupManager=function(){window.TimesApps.PopUpManager&&window.TimesApps.PopUpManager.isPopuMangerRunning()&&(t.popupManagerCallback=window.TimesApps.PopUpManager.registerPopup(t.moduleName,t.showNudge))},t.newArticleInView=function(){t.props.prc!==s.q&&t.props.prc!==s.r||t.checkMouting()},t.showNudge=function(){var e=t.popupManagerCallback;t.props.force&&t.setState({mounted:t.mounted}),e&&e.onShowCallback(!0),!1===t.popupDisplayed&&(t.popupDisplayed=!0,setTimeout((function(){t.setState({mounted:t.mounted}),t.props.popupVisible(!0),Object(i.e)(),t.pauseBackgroundVideo(),t.props.clickHandler("null",{type:"firega",ga_action:"defaultadfree_View",ga_label:"ps-".concat(t.props.prc,"_").concat(window.location.href)})}),1e3))},t.removeGoogleTag=function(){"undefined"!=typeof googletag&&(googletag=null)},t.hideAds=function(){setTimeout((function(){document.querySelectorAll(".remove-ad-btn,div[id^=div-clmb-ctn],div[class*=Videoshow-ctnAd],.colombia,.sponsWdt,.ad1,.ctn_ads_rhs,.ad,.ads,.ad-widget,div[id^=div-gpt-ad],div[class^=ctn_ads],.adinner,.ctn-workaround-div").forEach((function(e){try{e.classList.add("loyal_hide"),e.innerHTML=""}catch(e){}}))}),0)},t.handleScrollEvent=function(){var e=t.containerRef.current,o=t.props.clickHandler;e&&!t.gaFiredView&&Object(i.u)(e,0,!0)&&(t.gaFiredView=!0,o(null,{type:"firega",ga_action:"SubscribeNudge-Loginuser_View",ga_label:"PS_".concat(t.props.prc,"_").concat(window.location.href)}))},t.getUTMs=function(e){var t={utm_source:"TOI",utm_medium:"defaultadfree"};return t.utm_campaign=e?"Referral_Wap_TOI":"Referral_Web_TOI",t},t.getHtml=function(e){var o=e?t.getUTMs(e):t.getUTMs(),n=t.props,r=n.clickHandler,a=n.prc;return v("div",{},void 0,v("div",{className:h.a.adfree_loyal},void 0,v("div",{className:h.a.overlay_bg},void 0,v("div",{className:h.a.meteredPaywall},void 0,v("div",{className:h.a.common_blocker_box},void 0,v("div",{className:h.a.common_blocker},void 0,v("button",{className:h.a.close_btn,onClick:function(e){return r(e,{type:"AddFreeSessionLoyalUserClose",ga_action:"defaultadfree_Dismiss_close icon",ga_label:"ps-".concat(a,"_").concat(window.location.href)})}}),v("div",{className:h.a.blocker_content},void 0,v("div",{className:h.a.first_head},void 0,"Congratulations!"),v("div",{className:h.a.tag_line},void 0,"You are experiencing TOI without Ads"),v("div",{className:h.a.subs_text},void 0,"Subscribe to Times Prime membership to keep accessing TOI without Ads at no cost"),v("div",{className:h.a.btn_wrapper},void 0,v("button",{className:h.a.button1,onClick:function(e){return r(e,{type:"AddFreeSessionLoyalUsers",utms:o,ga_action:"defaultadfree_CTA_subscribe now",ga_label:"ps-".concat(a,"_").concat(window.location.href)})}},void 0,"Subscribe Now"),v("button",{href:"/toi-plus",className:"".concat(h.a.button1," ").concat(h.a.button_plain),onClick:function(e){return r(e,{type:"AddFreeSessionLoyalUserClose",ga_action:"defaultadfree_Dismiss_i like ads",ga_label:"ps-".concat(a,"_").concat(window.location.href)})}},void 0,"NO, I LIKE ADS")))))))))},t.state={mounted:!1},t.mounted=!1,t.containerRef=r.a.createRef(),t.storageName="adfreesession",t.popupDisplayed=!1,t.moduleName="adfreesession",t.popupManagerCallback=null,t}return t=c,(o=[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"pauseBackgroundVideo",value:function(){var e=this;window.S&&window.S.activePlayer?setTimeout((function(){window.S.activePlayer.pause()}),1e3):setTimeout((function(){e.pauseBackgroundVideo()}),1e3)}},{key:"resetAftertimeFrame",value:function(e){var t=e.timestamp;return parseInt(t,10)+648e7<(new Date).getTime()&&(this.props.removeStorage(this.storageName),this.props.removeStorage(this.storageName,!0),!0)}},{key:"allowedinTimeFrame",value:function(e){var t=e;return t?Number(t.adfreesessionCount)<5&&this.incrementCounters(t):this.incrementCounters(t)}},{key:"enableAdFreeSession",value:function(){window&&(window.winLoyalusers=!0),this.props.hideAdsforLoyalUsers(!0),this.hideAds(),this.removeGoogleTag()}},{key:"checkConditionsForPopup",value:function(){if(this.props.disableBlocker)return!1;var e;if(this.props.getStorage(this.storageName))try{e=JSON.parse(this.props.getStorage(this.storageName))}catch(e){}var t=this.allowedinTimeFrame(e);if(!t&&!this.resetAftertimeFrame(e))return!1;var o=t.sessionCount,n=t.pageCount;return 4===o&&n<=4&&this.enableAdFreeSession(),4===o&&4===n&&(this.resetCounters(e),this.mounted=!0),!0}},{key:"resetCounters",value:function(e){var t=e,o=t.adfreesessionCount,n=t.timestamp;o=Number(t&&o)+1,this.props.setInLocalStorage(this.storageName,JSON.stringify({pageCount:0,sessionCount:0,adfreesessionCount:o,timestamp:n})),this.props.removeStorage(this.storageName,!0)}},{key:"incrementCounters",value:function(e){var t={pageCount:1,sessionCount:1,adfreesessionCount:0},o={};return e?(o.timestamp=e.timestamp,o.sessionCount=Number(e.sessionCount),o.adfreesessionCount=Number(e.adfreesessionCount),null===this.props.getStorage(this.storageName,!0)?(this.props.setInLocalStorage(this.storageName,1,!0),o.sessionCount+=1):o.pageCount=Number(e.pageCount)+1):(t.timestamp=(new Date).getTime(),this.props.setInLocalStorage(this.storageName,1,!0)),Object.assign(t,o),this.props.setInLocalStorage(this.storageName,JSON.stringify(t)),{pageCount:t.pageCount,sessionCount:t.sessionCount}}},{key:"checkMouting",value:function(){return!1}},{key:"render",value:function(){var e=this.props,t=e.isWapView,o=e.theme;if(!this.state.mounted&&!this.props.force)return null;var n="";return o&&(n=o?h.a[o]:""),r.a.createElement("div",{className:"".concat(n),ref:this.containerRef},t&&this.getHtml(t),!t&&this.getHtml())}}])&&_(t.prototype,o),n&&_(t,n),c}(r.a.Component);N.defaultProps={disableBlocker:void 0,force:!1,theme:void 0};t.default=Object(a.b)(null,(function(e){return{hideAdsforLoyalUsers:function(t){e({type:f,paylaod:t})},popupVisible:function(t){e({type:m,paylaod:t})}}}))(N)}}]);
//# sourceMappingURL=188.7ac32368.chunk.js.map